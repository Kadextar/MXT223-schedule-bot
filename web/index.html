<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–µ–ª–∏ MXT-223</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Apple-like font -->
    <style>
        :root {
            --bg: #f5f5f7;
            --card: rgba(255, 255, 255, 0.75);
            --text-main: #1d1d1f;
            --text-secondary: #6e6e73;
            --accent: #007aff;
            --shadow: 0 20px 40px rgba(0,0,0,0.08);
            --radius: 20px;
        }

        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(180deg, #eef1f5, #f5f5f7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-main);
        }

        .container {
            width: 100%;
            max-width: 420px;
            padding: 20px;
        }

        h1 {
            text-align: center;
            font-size: 26px;
            font-weight: 600;
            margin-bottom: 24px;
        }

        .card {
            background: var(--card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 24px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 15px;
        }

        .item span:first-child {
            color: var(--text-secondary);
        }

        .divider {
            height: 1px;
            background: rgba(0,0,0,0.05);
            margin: 16px 0;
        }

        .button {
            margin-top: 20px;
            width: 100%;
            height: 44px;
            border-radius: 14px;
            border: none;
            background: var(--accent);
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .button:hover:not(:disabled) {
            filter: brightness(1.1);
        }

        .loading {
            text-align: center;
            margin-top: 14px;
            font-size: 14px;
            color: var(--text-secondary);
        }
    </style>
</head>

<body>
<div class="container">
    <h1>üìä –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–¥–µ–ª–∏ MXT-223</h1>

    <div class="card" id="card">
        <div class="item"><span>–ù–µ–¥–µ–ª—è</span><span id="week">‚Äî</span></div>
        <div class="item"><span>–õ–µ–∫—Ü–∏–∏</span><span id="lectures">‚Äî</span></div>
        <div class="item"><span>–°–µ–º–∏–Ω–∞—Ä—ã</span><span id="seminars">‚Äî</span></div>
        <div class="item"><span>–ß–∞—Å–æ–≤</span><span id="hours">‚Äî</span></div>

        <div class="divider"></div>

        <div class="item"><span>üî• –°–∞–º—ã–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π</span><span id="hard">‚Äî</span></div>
        <div class="item"><span>üòå –°–∞–º—ã–π –ª—ë–≥–∫–∏–π</span><span id="easy">‚Äî</span></div>

        <button class="button" id="btn" onclick="loadData()">–û–±–Ω–æ–≤–∏—Ç—å</button>
        <div class="loading" id="loading"></div>
    </div>
</div>

<script>
    async function loadData() {
        const btn = document.getElementById("btn");
        const loading = document.getElementById("loading");

        btn.disabled = true;
        loading.textContent = "–û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ‚Ä¶";

        try {
            const res = await fetch("/api/week-load");
            const data = await res.json();

            document.getElementById("week").textContent = data.week;
            document.getElementById("lectures").textContent = data.lectures;
            document.getElementById("seminars").textContent = data.seminars;
            document.getElementById("hours").textContent = data.total_hours;
            document.getElementById("hard").textContent = data.most_busy_day;
            document.getElementById("easy").textContent = data.least_busy_day;

            loading.textContent = "–ì–æ—Ç–æ–≤–æ ‚úì";
        } catch (e) {
            loading.textContent = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏";
        }

        btn.disabled = false;
        setTimeout(() => loading.textContent = "", 2000);
    }

    loadData();
</script>
</body>
</html>
